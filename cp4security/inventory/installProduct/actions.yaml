actions:
  metadata:
    name: installProduct
    description: The actions required to install Cloud Pak for Security 
  actionDefs:
    install:
      metadata:
        name: "install"
        description: "Installs Cloud Pak for Security and all its dependencies"
        case.launcher.type: "script"
      roles: 
      - clusterAdmin
      requires:
        metadata:
          message:
            onFailure: |
             Please check the CASE prerequisites to validate client machine has the minimum requirements for cli tools and openshift,kubernetes distros
        and:
        - "/case/prereqs/k8sDistros/kubernetes"
        - "/case/prereqs/k8sDistros/openshift"
        - "/case/prereqs/client/oc"
        - "/case/prereqs/client/cloudctl"
        - "/case/prereqs/client/openssl"
        - or: 
           - "/case/prereqs/client/docker"
           - "/case/prereqs/client/podman"
        - or:
           - "/case/prereqs/client/helm3"
           - "/case/prereqs/client/helm"
      k8sPermissions:
        rules:
        - rule:
            group: rbac.authorization.k8s.io
            resource: clusterroles
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
            version: '*'
        - rule: 
            group: apiextensions.k8s.io
            resource: customresourcedefinitions
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
            version: v1
        - rule: 
            group: ""
            resource: "namespaces"
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
        - rule: 
            group: "extensions"
            resource: "networkpolicies"
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
        - rule: 
            group: ""
            resource: "serviceaccounts"
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
    listConnectors:
      metadata:
        name: "listConnectors"
        description: "List Cloud Pak Connectors for Security from backup"
        case.launcher.type: "script"
        case.cli.alias: "list-connectors"
      roles: 
      - clusterAdmin
      requires:
        metadata:
          message:
            onFailure: |
             Please check the CASE prerequisites to validate client machine has the minimum requirements for cli tools and openshift,kubernetes distros
        and:
        - "/case/prereqs/k8sDistros/kubernetes"
        - "/case/prereqs/k8sDistros/openshift"
        - "/case/prereqs/client/oc"
      k8sPermissions:
        rules:
        - rule:
            group: rbac.authorization.k8s.io
            resource: clusterroles
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
            version: '*'
        - rule: 
            group: apiextensions.k8s.io
            resource: customresourcedefinitions
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
            version: v1
        - rule: 
            group: ""
            resource: "namespaces"
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
        - rule: 
            group: "extensions"
            resource: "networkpolicies"
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
        - rule: 
            group: ""
            resource: "serviceaccounts"
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
    getConnector:
      metadata:
        name: "getConnector"
        description: "Describe Cloud Pak Connector for Security from backup"
        case.launcher.type: "script"
        case.cli.alias: "get-connector"
      roles: 
      - clusterAdmin
      requires:
        metadata:
          message:
            onFailure: |
             Please check the CASE prerequisites to validate client machine has the minimum requirements for cli tools and openshift,kubernetes distros
        and:
        - "/case/prereqs/k8sDistros/kubernetes"
        - "/case/prereqs/k8sDistros/openshift"
        - "/case/prereqs/client/oc"
      k8sPermissions:
        rules:
        - rule:
            group: rbac.authorization.k8s.io
            resource: clusterroles
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
            version: '*'
        - rule: 
            group: apiextensions.k8s.io
            resource: customresourcedefinitions
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
            version: v1
        - rule: 
            group: ""
            resource: "namespaces"
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
        - rule: 
            group: "extensions"
            resource: "networkpolicies"
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
        - rule: 
            group: ""
            resource: "serviceaccounts"
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
    deployConnector:
      metadata:
        name: "deployConnector"
        description: "Deploy Cloud Pak Connector for Security"
        case.launcher.type: "script"
        case.cli.alias: "deploy-connector"
      roles: 
      - clusterAdmin
      requires:
        metadata:
          message:
            onFailure: |
             Please check the CASE prerequisites to validate client machine has the minimum requirements for cli tools and openshift,kubernetes distros
        and:
        - "/case/prereqs/k8sDistros/kubernetes"
        - "/case/prereqs/k8sDistros/openshift"
        - "/case/prereqs/client/oc"       
        or:
        - "/case/prereqs/client/docker"
        - "/case/prereqs/client/podman"
      k8sPermissions:
        rules:
        - rule:
            group: rbac.authorization.k8s.io
            resource: clusterroles
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
            version: '*'
        - rule: 
            group: apiextensions.k8s.io
            resource: customresourcedefinitions
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
            version: v1
        - rule: 
            group: ""
            resource: "namespaces"
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
        - rule: 
            group: "extensions"
            resource: "networkpolicies"
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
        - rule: 
            group: ""
            resource: "serviceaccounts"
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
    deleteConnector:
      metadata:
        name: "deleteConnector"
        description: "Delete Cloud Pak Connector for Security from backup"
        case.launcher.type: "script"
        case.cli.alias: "delete-connector"
      roles: 
      - clusterAdmin
      requires:
        metadata:
          message:
            onFailure: |
             Please check the CASE prerequisites to validate client machine has the minimum requirements for cli tools and openshift,kubernetes distros
        and:
        - "/case/prereqs/k8sDistros/kubernetes"
        - "/case/prereqs/k8sDistros/openshift"
        - "/case/prereqs/client/oc"
      k8sPermissions:
        rules:
        - rule:
            group: rbac.authorization.k8s.io
            resource: clusterroles
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
            version: '*'
        - rule: 
            group: apiextensions.k8s.io
            resource: customresourcedefinitions
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
            version: v1
        - rule: 
            group: ""
            resource: "namespaces"
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
        - rule: 
            group: "extensions"
            resource: "networkpolicies"
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
        - rule: 
            group: ""
            resource: "serviceaccounts"
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
    restoreConnectors:
      metadata:
        name: "restoreConnectors"
        description: "Restore Cloud Pak Connectors for Security from backup"
        case.launcher.type: "script"
      roles: 
      - clusterAdmin
      requires:
        metadata:
          message:
            onFailure: |
             Please check the CASE prerequisites to validate client machine has the minimum requirements for cli tools and openshift,kubernetes distros
        and:
        - "/case/prereqs/k8sDistros/kubernetes"
        - "/case/prereqs/k8sDistros/openshift"
        - "/case/prereqs/client/oc"
      k8sPermissions:
        rules:
        - rule:
            group: rbac.authorization.k8s.io
            resource: clusterroles
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
            version: '*'
        - rule: 
            group: apiextensions.k8s.io
            resource: customresourcedefinitions
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
            version: v1
        - rule: 
            group: ""
            resource: "namespaces"
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
        - rule: 
            group: "extensions"
            resource: "networkpolicies"
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
        - rule: 
            group: ""
            resource: "serviceaccounts"
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
    upgradeAll:
      metadata:
        name: "upgradeAll"
        description: "Upgrade to latest version of Cloud Pak for Security"
        case.launcher.type: "script"
        case.cli.alias: "upgrade-all"
      roles: 
      - clusterAdmin
      requires:
        metadata:
          message:
            onFailure: |
             Please check the CASE prerequisites to validate client machine has the minimum requirements for cli tools and openshift,kubernetes distros  
        and:
        - "/case/prereqs/k8sDistros/kubernetes"
        - "/case/prereqs/k8sDistros/openshift"
        - "/case/prereqs/client/oc"
        - "/case/prereqs/client/cloudctl"
        - "/case/prereqs/client/openssl"
        - or: 
           - "/case/prereqs/client/docker"
           - "/case/prereqs/client/podman"
        - or:
           - "/case/prereqs/client/helm3"
           - "/case/prereqs/client/helm"
      k8sPermissions:
          rules:
          - rule:
              group: rbac.authorization.k8s.io
              resource: clusterroles
              verbs:
              - get
              - list
              - watch
              - create
              - patch
              - update
              version: '*'
          - rule: 
              group: apiextensions.k8s.io
              resource: customresourcedefinitions
              verbs:
              - get
              - list
              - watch
              - create
              - patch
              - update
              version: v1
          - rule: 
              group: ""
              resource: "namespaces"
              verbs:
              - get
              - list
              - watch
              - create
              - patch
              - update
          - rule: 
              group: "extensions"
              resource: "networkpolicies"
              verbs:
              - get
              - list
              - watch
              - create
              - patch
              - update
          - rule: 
              group: ""
              resource: "serviceaccounts"
              verbs:
              - get
              - list
              - watch
              - create
              - patch
    validate:
      metadata:
        name: "validate"
        description: "Validate Cloud Pak for Security installation"
        case.launcher.type: "script"
        case.cli.alias: "validate-cp4s"
      roles: 
      - clusterAdmin
      requires:
        metadata:
          message:
            onFailure: |
             Please check the CASE prerequisites to validate client machine has the minimum requirements for cli tools and openshift,kubernetes distros  
        and:
        - "/case/prereqs/k8sDistros/kubernetes"
        - "/case/prereqs/k8sDistros/openshift"
        - "/case/prereqs/client/oc"
        - "/case/prereqs/client/cloudctl"
        - or:
           - "/case/prereqs/client/helm3"
           - "/case/prereqs/client/helm"
      k8sPermissions:
          rules:
          - rule:
              group: rbac.authorization.k8s.io
              resource: clusterroles
              verbs:
              - get
              - list
              - watch
              - create
              - patch
              - update
              version: '*'
          - rule: 
              group: apiextensions.k8s.io
              resource: customresourcedefinitions
              verbs:
              - get
              - list
              - watch
              - create
              - patch
              - update
              version: v1
          - rule: 
              group: ""
              resource: "namespaces"
              verbs:
              - get
              - list
              - watch
              - create
              - patch
              - update
          - rule: 
              group: "extensions"
              resource: "networkpolicies"
              verbs:
              - get
              - list
              - watch
              - create
              - patch
              - update
          - rule: 
              group: ""
              resource: "serviceaccounts"
              verbs:
              - get
              - list
              - watch
              - create
              - patch
    postUpgrade:
      metadata:
        name: "postUpgrade"
        description: "Run Post Upgrade of Cloud Pak for Security Solutions installation"
        case.launcher.type: "script"
        case.cli.alias: "post-upgrade"
      roles: 
      - clusterAdmin
      requires:
        metadata:
          message:
            onFailure: |
             Please check the CASE prerequisites to validate client machine has the minimum requirements for cli tools and openshift,kubernetes distros  
        and:
        - "/case/prereqs/k8sDistros/kubernetes"
        - "/case/prereqs/k8sDistros/openshift"
        - "/case/prereqs/client/oc"
        - "/case/prereqs/client/cloudctl"
        - or:
           - "/case/prereqs/client/helm3"
           - "/case/prereqs/client/helm"
      k8sPermissions:
          rules:
          - rule:
              group: rbac.authorization.k8s.io
              resource: clusterroles
              verbs:
              - get
              - list
              - watch
              - create
              - patch
              - update
              version: '*'
          - rule: 
              group: apiextensions.k8s.io
              resource: customresourcedefinitions
              verbs:
              - get
              - list
              - watch
              - create
              - patch
              - update
              version: v1
          - rule: 
              group: ""
              resource: "namespaces"
              verbs:
              - get
              - list
              - watch
              - create
              - patch
              - update
          - rule: 
              group: "extensions"
              resource: "networkpolicies"
              verbs:
              - get
              - list
              - watch
              - create
              - patch
              - update
          - rule: 
              group: ""
              resource: "serviceaccounts"
              verbs:
              - get
              - list
              - watch
              - create
              - patch
    upgradeCommonServices:
      metadata:
        name: "upgradeCommonServices"
        description: "Upgrade Common Services from version 3.2.4 to 3.4"
        case.launcher.type: "script"
        case.cli.alias: "upgrade-commonservices"
      roles: 
      - clusterAdmin
      requires:
        metadata:
          message:
            onFailure: |
             Please check the CASE prerequisites to validate client machine has the minimum requirements for cli tools and openshift,kubernetes distros  
        and:
        - "/case/prereqs/k8sDistros/kubernetes"
        - "/case/prereqs/k8sDistros/openshift"
        - "/case/prereqs/client/oc"
        - "/case/prereqs/client/cloudctl"
        or:
        - "/case/prereqs/client/docker"
        - "/case/prereqs/client/podman"
      k8sPermissions:
          rules:
          - rule:
              group: rbac.authorization.k8s.io
              resource: clusterroles
              verbs:
              - get
              - list
              - watch
              - create
              - patch
              - update
              version: '*'
          - rule: 
              group: apiextensions.k8s.io
              resource: customresourcedefinitions
              verbs:
              - get
              - list
              - watch
              - create
              - patch
              - update
              version: v1
          - rule: 
              group: ""
              resource: "namespaces"
              verbs:
              - get
              - list
              - watch
              - create
              - patch
              - update
          - rule: 
              group: "extensions"
              resource: "networkpolicies"
              verbs:
              - get
              - list
              - watch
              - create
              - patch
              - update
          - rule: 
              group: ""
              resource: "serviceaccounts"
              verbs:
              - get
              - list
              - watch
              - create
              - patch
    upgradeFoundations:
      metadata:
        name: "upgradeFoundations"
        description: "Upgrade Foundations chart"
        case.launcher.type: "script"
        case.cli.alias: "upgrade-foundations"
      roles: 
      - clusterAdmin
      requires:
        metadata:
          message:
            onFailure: |
             Please check the CASE prerequisites to validate client machine has the minimum requirements for cli tools and openshift,kubernetes distros  
        and:
        - "/case/prereqs/k8sDistros/kubernetes"
        - "/case/prereqs/k8sDistros/openshift"
        - "/case/prereqs/client/oc"
        - "/case/prereqs/client/cloudctl"
        - "/case/prereqs/client/openssl"
        - or: 
           - "/case/prereqs/client/docker"
           - "/case/prereqs/client/podman"
        - or:
           - "/case/prereqs/client/helm3"
           - "/case/prereqs/client/helm"
      k8sPermissions:
          rules:
          - rule:
              group: rbac.authorization.k8s.io
              resource: clusterroles
              verbs:
              - get
              - list
              - watch
              - create
              - patch
              - update
              version: '*'
          - rule: 
              group: apiextensions.k8s.io
              resource: customresourcedefinitions
              verbs:
              - get
              - list
              - watch
              - create
              - patch
              - update
              version: v1
          - rule: 
              group: ""
              resource: "namespaces"
              verbs:
              - get
              - list
              - watch
              - create
              - patch
              - update
          - rule: 
              group: "extensions"
              resource: "networkpolicies"
              verbs:
              - get
              - list
              - watch
              - create
              - patch
              - update
          - rule: 
              group: ""
              resource: "serviceaccounts"
              verbs:
              - get
              - list
              - watch
              - create
              - patch
    upgradeSolutions:
      metadata:
        name: "upgradeSolutions"
        description: "Upgrade Solutions chart"
        case.launcher.type: "script"
        case.cli.alias: "upgrade-solutions"
      roles: 
      - clusterAdmin
      requires:
        metadata:
          message:
            onFailure: |
             Please check the CASE prerequisites to validate client machine has the minimum requirements for cli tools and openshift,kubernetes distros  
        and:
        - "/case/prereqs/k8sDistros/kubernetes"
        - "/case/prereqs/k8sDistros/openshift"
        - "/case/prereqs/client/oc"
        - "/case/prereqs/client/cloudctl"
        - "/case/prereqs/client/openssl"
        - or: 
           - "/case/prereqs/client/docker"
           - "/case/prereqs/client/podman"
        - or:
           - "/case/prereqs/client/helm3"
           - "/case/prereqs/client/helm"
      k8sPermissions:
          rules:
          - rule:
              group: rbac.authorization.k8s.io
              resource: clusterroles
              verbs:
              - get
              - list
              - watch
              - create
              - patch
              - update
              version: '*'
          - rule: 
              group: apiextensions.k8s.io
              resource: customresourcedefinitions
              verbs:
              - get
              - list
              - watch
              - create
              - patch
              - update
              version: v1
          - rule: 
              group: ""
              resource: "namespaces"
              verbs:
              - get
              - list
              - watch
              - create
              - patch
              - update
          - rule: 
              group: "extensions"
              resource: "networkpolicies"
              verbs:
              - get
              - list
              - watch
              - create
              - patch
              - update
          - rule: 
              group: ""
              resource: "serviceaccounts"
              verbs:
              - get
              - list
              - watch
              - create
              - patch
    installRedisOperator:
      metadata:
        name: installRedisOperator "
        description: "Install Redis operator"
        case.launcher.type: "script"
        case.cli.alias: "install-redisoperator"
      roles: 
      - clusterAdmin
      requires:
        metadata:
          message:
            onFailure: |
              Please check the CASE prerequisites to validate client machine has the minimum requirements for cli tools and openshift,kubernetes distros
        and:
        - "/case/prereqs/k8sDistros/kubernetes"
        - "/case/prereqs/k8sDistros/openshift"
        - "/case/prereqs/client/oc"
      k8sPermissions:
          rules:
            - rule:
                group: rbac.authorization.k8s.io
                resource: clusterroles
                verbs:
                - get
                - list
                - watch
                - create
                - patch
                - update
                version: '*'
            - rule: 
                group: apiextensions.k8s.io
                resource: customresourcedefinitions
                verbs:
                - get
                - list
                - watch
                - create
                - patch
                - update
                version: v1
            - rule: 
                group: ""
                resource: "namespaces"
                verbs:
                - get
                - list
                - watch
                - create
                - patch
                - update
            - rule: 
                group: "extensions"
                resource: "networkpolicies"
                verbs:
                - get
                - list
                - watch
                - create
                - patch
                - update
            - rule: 
                group: ""
                resource: "serviceaccounts"
                verbs:
                - get
                - list
                - watch
                - create
                - patch
                - update
    installCouchdbOperator:
      metadata:
        name: " installCouchdbOperator"
        description: "Install Couchdb operator"
        case.launcher.type: "script"
        case.cli.alias: "install-couchdboperator"
      roles: 
      - clusterAdmin
      requires:
        metadata:
          message:
            onFailure: |
              Please check the CASE prerequisites to validate client machine has the minimum requirements for cli tools and openshift,kubernetes distros
        and:
        - "/case/prereqs/k8sDistros/kubernetes"
        - "/case/prereqs/k8sDistros/openshift"
        - "/case/prereqs/client/oc"
      k8sPermissions:
          rules:
            - rule:
                group: rbac.authorization.k8s.io
                resource: clusterroles
                verbs:
                - get
                - list
                - watch
                - create
                - patch
                - update
                version: '*'
            - rule: 
                group: apiextensions.k8s.io
                resource: customresourcedefinitions
                verbs:
                - get
                - list
                - watch
                - create
                - patch
                - update
                version: v1
            - rule: 
                group: ""
                resource: "namespaces"
                verbs:
                - get
                - list
                - watch
                - create
                - patch
                - update
            - rule: 
                group: "extensions"
                resource: "networkpolicies"
                verbs:
                - get
                - list
                - watch
                - create
                - patch
                - update
            - rule: 
                group: ""
                resource: "serviceaccounts"
                verbs:
                - get
                - list
                - watch
                - create
                - patch
                - update
    installCommonServices:
      metadata:
        name: "installCommonServices"
        description: "Install common services"
        case.launcher.type: "script"
        case.cli.alias: "install-commonservices"
      roles: 
      - clusterAdmin
      requires:
        metadata:
          message:
            onFailure: |
              Please check the CASE prerequisites to validate client machine has the minimum requirements for cli tools and openshift,kubernetes distros
        and:
        - "/case/prereqs/k8sDistros/kubernetes"
        - "/case/prereqs/k8sDistros/openshift"
        - "/case/prereqs/client/oc"
      k8sPermissions:
          rules:
            - rule:
                group: rbac.authorization.k8s.io
                resource: clusterroles
                verbs:
                - get
                - list
                - watch
                - create
                - patch
                - update
                version: '*'
            - rule: 
                group: apiextensions.k8s.io
                resource: customresourcedefinitions
                verbs:
                - get
                - list
                - watch
                - create
                - patch
                - update
                version: v1
            - rule: 
                group: ""
                resource: "namespaces"
                verbs:
                - get
                - list
                - watch
                - create
                - patch
                - update
            - rule: 
                group: "extensions"
                resource: "networkpolicies"
                verbs:
                - get
                - list
                - watch
                - create
                - patch
                - update
            - rule: 
                group: ""
                resource: "serviceaccounts"
                verbs:
                - get
                - list
                - watch
                - create
                - patch
                - update
    installFoundations:
      metadata:
        name: "installFoundations"
        description: "Install foundations chart"
        case.launcher.type: "script"
        case.cli.alias: "install-foundations"
      roles: 
      - clusterAdmin
      requires:
        metadata:
          message:
            onFailure: |
              Please check the CASE prerequisites to validate client machine has the minimum requirements for cli tools and openshift,kubernetes distros
        and:
        - "/case/prereqs/k8sDistros/kubernetes"
        - "/case/prereqs/k8sDistros/openshift"
        - "/case/prereqs/client/oc"
        - "/case/prereqs/client/cloudctl"
        - "/case/prereqs/client/openssl"
        - or: 
           - "/case/prereqs/client/docker"
           - "/case/prereqs/client/podman"
        - or:
           - "/case/prereqs/client/helm3"
           - "/case/prereqs/client/helm"
      k8sPermissions:
        rules:
          - rule:
              group: rbac.authorization.k8s.io
              resource: clusterroles
              verbs:
              - get
              - list
              - watch
              - create
              - patch
              - update
              version: '*'
          - rule: 
              group: apiextensions.k8s.io
              resource: customresourcedefinitions
              verbs:
              - get
              - list
              - watch
              - create
              - patch
              - update
              version: v1
          - rule: 
              group: ""
              resource: "namespaces"
              verbs:
              - get
              - list
              - watch
              - create
              - patch
              - update
          - rule: 
              group: "extensions"
              resource: "networkpolicies"
              verbs:
              - get
              - list
              - watch
              - create
              - patch
              - update
          - rule: 
              group: ""
              resource: "serviceaccounts"
              verbs:
              - get
              - list
              - watch
              - create
              - patch
              - update
    installSolutions:
      metadata:
        name: "installSolutions"
        description: "Install solutions chart"
        case.launcher.type: "script"
        case.cli.alias: "install-solutions"
      roles: 
      - clusterAdmin
      requires:
        metadata:
          message:
            onFailure: |
              Please check the CASE prerequisites to validate client machine has the minimum requirements for cli tools and openshift,kubernetes distros
        and:
        - "/case/prereqs/k8sDistros/kubernetes"
        - "/case/prereqs/k8sDistros/openshift"
        - "/case/prereqs/client/oc"
        - "/case/prereqs/client/cloudctl"
        - "/case/prereqs/client/openssl"
        - or: 
           - "/case/prereqs/client/docker"
           - "/case/prereqs/client/podman"
        - or:
           - "/case/prereqs/client/helm3"
           - "/case/prereqs/client/helm"
      k8sPermissions:
        rules:
          - rule:
              group: rbac.authorization.k8s.io
              resource: clusterroles
              verbs:
              - get
              - list
              - watch
              - create
              - patch
              - update
              version: '*'
          - rule: 
              group: apiextensions.k8s.io
              resource: customresourcedefinitions
              verbs:
              - get
              - list
              - watch
              - create
              - patch
              - update
              version: v1
          - rule: 
              group: ""
              resource: "namespaces"
              verbs:
              - get
              - list
              - watch
              - create
              - patch
              - update
          - rule: 
              group: "extensions"
              resource: "networkpolicies"
              verbs:
              - get
              - list
              - watch
              - create
              - patch
              - update
          - rule: 
              group: ""
              resource: "serviceaccounts"
              verbs:
              - get
              - list
              - watch
              - create
              - patch
              - update
    installServiceability:
      metadata:
        name: "installServiceability"
        description: "Install CloudPak Serviceability Pod"
        case.launcher.type: "script"
        case.cli.alias: "install-serviceability"
      roles: 
      - clusterAdmin
      requires:
        metadata:
          message:
            onFailure: |
             Please check the CASE prerequisites to validate client machine has the minimum requirements for cli tools and openshift,kubernetes distros  
        and:
        - "/case/prereqs/k8sDistros/kubernetes"
        - "/case/prereqs/k8sDistros/openshift"
        - "/case/prereqs/client/oc"
      k8sPermissions:
          rules:
          - rule:
              group: rbac.authorization.k8s.io
              resource: clusterroles
              verbs:
              - get
              - list
              - watch
              - create
              - patch
              - update
              version: '*'
          - rule: 
              group: apiextensions.k8s.io
              resource: customresourcedefinitions
              verbs:
              - get
              - list
              - watch
              - create
              - patch
              - update
              version: v1
          - rule: 
              group: ""
              resource: "namespaces"
              verbs:
              - get
              - list
              - watch
              - create
              - patch
              - update
          - rule: 
              group: "extensions"
              resource: "networkpolicies"
              verbs:
              - get
              - list
              - watch
              - create
              - patch
              - update
          - rule: 
              group: ""
              resource: "serviceaccounts"
              verbs:
              - get
              - list
              - watch
              - create
              - patch                     
    uninstall:
      metadata:
        name: "uninstallAll"
        description: "Uninstalls Cloud Pak for Security and all its dependencies"
        case.launcher.type: "script"
      roles: 
      - clusterAdmin
      requires:
        metadata:
          message:
            onFailure: |
              Please check the CASE prerequisites to validate client machine has the minimum requirements for cli tools and openshift,kubernetes distros
        and:
        - "/case/prereqs/k8sDistros/kubernetes"
        - "/case/prereqs/k8sDistros/openshift"
        - "/case/prereqs/client/oc"
        - "/case/prereqs/client/cloudctl"
        - or: 
           - "/case/prereqs/client/docker"
           - "/case/prereqs/client/podman"
        - or:
           - "/case/prereqs/client/helm3"
           - "/case/prereqs/client/helm"
      k8sPermissions:
        rules:
        - rule:
            group: rbac.authorization.k8s.io
            resource: clusterroles
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
            version: '*'
        - rule: 
            group: apiextensions.k8s.io
            resource: customresourcedefinitions
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
            version: v1
        - rule: 
            group: ""
            resource: "namespaces"
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
        - rule: 
            group: "extensions"
            resource: "networkpolicies"
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
        - rule: 
            group: ""
            resource: "serviceaccounts"
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
    uninstallCouchdbOperator:
      metadata:
        name: "Uninstall Couchdb operator"
        description: "uninstalls the Couchdb operator"
        case.launcher.type: "script"
        case.cli.alias: "uninstall-couchdboperator"
      roles: 
      - clusterAdmin
      requires:
        metadata:
          message:
            onFailure: |
              Please check the CASE prerequisites to validate client machine has the minimum requirements for cli tools and openshift,kubernetes distros
        and:
        - "/case/prereqs/k8sDistros/kubernetes"
        - "/case/prereqs/k8sDistros/openshift"
        - "/case/prereqs/client/oc"
        - "/case/prereqs/k8sResources/nonrootSCC"
      k8sPermissions:
        rules:
        - rule:
            group: rbac.authorization.k8s.io
            resource: clusterroles
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
            version: '*'
        - rule: 
            group: apiextensions.k8s.io
            resource: customresourcedefinitions
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
            version: v1
        - rule: 
            group: ""
            resource: "namespaces"
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
        - rule: 
            group: "extensions"
            resource: "networkpolicies"
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
        - rule: 
            group: ""
            resource: "serviceaccounts"
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
    uninstallRedisOperator:
      metadata:
        name: "Uninstall redis operator"
        description: "uninstalls the redis operator"
        case.launcher.type: "script"
        case.cli.alias: "uninstall-redisoperator"
      roles: 
      - clusterAdmin
      requires:
        metadata:
          message:
            onFailure: |
              Please check the CASE prerequisites to validate client machine has the minimum requirements for cli tools and openshift,kubernetes distros
        and:
        - "/case/prereqs/k8sDistros/kubernetes"
        - "/case/prereqs/k8sDistros/openshift"
        - "/case/prereqs/client/oc"
      k8sPermissions:
        rules:
        - rule:
            group: rbac.authorization.k8s.io
            resource: clusterroles
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
            version: '*'
        - rule: 
            group: apiextensions.k8s.io
            resource: customresourcedefinitions
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
            version: v1
        - rule: 
            group: ""
            resource: "namespaces"
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
        - rule: 
            group: "extensions"
            resource: "networkpolicies"
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
        - rule: 
            group: ""
            resource: "serviceaccounts"
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
    uninstallFoundations:
      metadata:
        name: "Uninstall Foundations"
        description: "Uninstalls ibm-security-foundations chart"
        case.launcher.type: "script"
        case.cli.alias: "uninstall-foundations"
      roles: 
      - clusterAdmin
      requires:
        metadata:
          message:
            onFailure: |
              Please check the CASE prerequisites to validate client machine has the minimum requirements for cli tools and openshift,kubernetes distros
        and:
        - "/case/prereqs/k8sDistros/kubernetes"
        - "/case/prereqs/k8sDistros/openshift"
        - "/case/prereqs/client/oc"
        - "/case/prereqs/client/cloudctl"
        - or: 
           - "/case/prereqs/client/docker"
           - "/case/prereqs/client/podman"
        - or:
           - "/case/prereqs/client/helm3"
           - "/case/prereqs/client/helm"
      k8sPermissions:
        rules:
        - rule:
            group: rbac.authorization.k8s.io
            resource: clusterroles
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
            version: '*'
        - rule: 
            group: apiextensions.k8s.io
            resource: customresourcedefinitions
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
            version: v1
        - rule: 
            group: ""
            resource: "namespaces"
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
        - rule: 
            group: "extensions"
            resource: "networkpolicies"
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
        - rule: 
            group: ""
            resource: "serviceaccounts"
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
    uninstallSolutions:
      metadata:
        name: "Uninstall Solutions"
        description: "Uninstalls ibm-security-solutions chart"
        case.launcher.type: "script"
        case.cli.alias: "uninstall-solutions"
      roles: 
      - clusterAdmin
      requires:
        metadata:
          message:
            onFailure: |
              Please check the CASE prerequisites to validate client machine has the minimum requirements for cli tools and openshift,kubernetes distros
        and:
        - "/case/prereqs/k8sDistros/kubernetes"
        - "/case/prereqs/k8sDistros/openshift"
        - "/case/prereqs/client/oc"
        - "/case/prereqs/client/cloudctl"
        - or: 
           - "/case/prereqs/client/docker"
           - "/case/prereqs/client/podman"
        - or:
           - "/case/prereqs/client/helm3"
           - "/case/prereqs/client/helm"
      k8sPermissions:
        rules:
        - rule:
            group: rbac.authorization.k8s.io
            resource: clusterroles
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
            version: '*'
        - rule: 
            group: apiextensions.k8s.io
            resource: customresourcedefinitions
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
            version: v1
        - rule: 
            group: ""
            resource: "namespaces"
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
        - rule: 
            group: "extensions"
            resource: "networkpolicies"
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
        - rule: 
            group: ""
            resource: "serviceaccounts"
            verbs:
            - get
            - list
            - watch
            - create
            - patch
            - update
    uninstallCommonServices:
      metadata:
        name: "Uninstall commonservices"
        description: "Uninstalls common services 3.4"
        case.launcher.type: "script"
        case.cli.alias: "uninstall-commonservices"
      roles: 
      - clusterAdmin
      requires:
        metadata:
          message:
            onFailure: |
              Please check the CASE prerequisites to validate client machine has the minimum requirements for cli tools and openshift,kubernetes distros
        and:
        - "/case/prereqs/k8sDistros/kubernetes"
        - "/case/prereqs/k8sDistros/openshift"
        - "/case/prereqs/client/oc"
        - "/case/prereqs/client/cloudctl"
      k8sPermissions:
        rules: []

    mirrorImages:
      metadata:
        name: "mirrorImages"
        description: "Mirrors the images to a local registry using oc"
        case.launcher.type: "script"
        case.cli.alias: "mirror-images"
      roles:
        - clusterAdmin
      requires:
        metadata:
          message:
            onFailure: |
              Please check the CASE prerequisites to validate client machine has the minimum requirements for cli tools and openshift,kubernetes distros
        and:
        - "/case/prereqs/client/oc"
        - "/case/prereqs/client/docker"
      k8sPermissions:
        rules:
          - rule:
              group: secrets
              resource: '*'
              verbs:
                - get
                - list
                - watch
                - create
                - patch
                - update
    configureCredsAirgap:
      metadata:
        name: "configureCredsAirgap"
        description: "configures login credentials for an image registry"
        case.launcher.type: "script"
        case.cli.alias: "configure-creds-airgap"
      roles:
        - clusterAdmin
      k8sPermissions:
        rules: []

    configureClusterAirgap:
      metadata:
        name: "configureClusterAirgap"
        description: "configures global pullsecret and imagesourcecontentpolicy"
        case.launcher.type: "script"
        case.cli.alias: "configure-cluster-airgap"
      roles:
        - clusterAdmin
      k8sPermissions:
        rules: []
    updateCases:
      metadata:
        name: "updateCases"
        description: "update Cases CustomResource with latest images"
        case.launcher.type: "script"
        case.cli.alias: "update-cases"
      roles: 
      - clusterAdmin
      requires:
        metadata:
          message:
            onFailure: |
              Please check the CASE prerequisites to validate client machine has the minimum requirements for cli tools and openshift,kubernetes distros
        and:
        - "/case/prereqs/k8sDistros/kubernetes"
        - "/case/prereqs/k8sDistros/openshift"
        - "/case/prereqs/client/oc"
        - "/case/prereqs/client/cloudctl"
      k8sPermissions:
        rules: []
    mirrorCasesImages:
      metadata:
        name: "mirrorCasesImages"
        description: "Mirrors the images to a local registry using oc"
        case.launcher.type: "script"
        case.cli.alias: "mirror-cases-images"
      roles:
        - clusterAdmin
      requires:
        metadata:
          message:
            onFailure: |
              Please check the CASE prerequisites to validate client machine has the minimum requirements for cli tools and openshift,kubernetes distros
        and:
        - "/case/prereqs/client/oc"
        - "/case/prereqs/client/docker"
      k8sPermissions:
        rules:
          - rule:
              group: secrets
              resource: '*'
              verbs:
                - get
                - list
                - watch
                - create
                - patch
                - update